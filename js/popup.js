/*! dwithease - v1.6.0 - 2017-02-16 */!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(b.dwe||(b.dwe={})).exports=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("./base-storage.js");angular.module("chromeStorage",[]).factory("chromeStorage",["$q",function(a){function b(a,b){return 0===b?a:a+"_"+b}var c=null,e="dwe_sandboxes";try{c=chrome.storage.sync}catch(a){console.log("could not initiate chrome local storage: "+a)}return{get:function(b){var d=a.defer();return c.get(b,function(a){var c=a[b];d.resolve(c)}),d.promise},getSandboxes:function(){var d=a.defer();return c.get(null,function(a){var f,g=[];for(f=0;f<c.MAX_ITEMS&&void 0!==a[b(e,f)];f++)g.push.apply(g,a[b(e,f)]);chrome.runtime.lasterror?(console.log("error getting sandbox data"),d.reject(chrome.runtime.lasterror.message)):d.resolve(g)}),d.promise},set:function(b,d){var e=a.defer(),f={};return f[b]=d,c.set(f,function(){chrome.runtime.lasterror?console.error(chrome.runtime.lasterror.message):e.resolve()}),e.promise},setSandboxes:function(b,c){var e=a.defer();return d.setSandboxes(b,c,function(){chrome.runtime.lasterror?(console.log("error setting sandbox data"),e.reject(chrome.runtime.lasterror.message)):e.resolve()}),e.promise}}}])},{"./base-storage.js":2}],2:[function(a,b,c){function d(a,b){return 0===b?a:a+"_"+b}var e=(a("../libs/constants.js"),"dwe_sandboxes"),f=null;try{f=chrome.storage.sync}catch(a){console.log("could not initiate chrome local storage: "+a)}storage={};var g=function(a,b){"undefined"!=typeof b&&b(a)};storage.get=function(a,b){f.get(a,function(a){g(a,b)})},storage.getSandboxes=function(a){f.get(null,function(b){var c,h=[];for(c=0;c<f.MAX_ITEMS&&void 0!==b[d(e,c)];c++)h.push.apply(h,b[d(e,c)]);g(h,a)})},storage.set=function(a,b){f.set(a,function(a){g(a,b)})},storage.splitArray=function(a,b){if(a){for(var c=a.slice(0),d=[];c.length>0;)d.push(c.splice(0,b));return d}},storage.lengthInUtf8Bytes=function(a){var b=encodeURIComponent(a).match(/%[89ABab]/g);return a.length+(b?b.length:0)},storage.setSandboxes=function(a,b){if(a){for(var c,g,h=0,i={},j=this.splitArray(a,1),h=0;h<j.length;h++)g=d(e,h),c=j[h],i[g]=c;f.set(i,b),f.remove(d(e,h))}},storage.remove=function(a,b){f.remove(a,function(a){g(a,b)})},b.exports=storage},{"../libs/constants.js":3}],3:[function(a,b,c){for(var d="mjgfjtbxftpnfboetpbnj",e="",f=0;f<d.length;f++)e+=28===d.charCodeAt(f)?"&":23===d.charCodeAt(f)?"!":String.fromCharCode(d.charCodeAt(f)-1);var g=function(a){return 0===Object.keys(a).length},h={};h.sandboxNotifId="sandboxNotification",h.donateNotifId="donateNotification",h.wrongPassNotifId="wrongPassword",h.newUpdateNotifId="extensionUpdate",h.generalOptsKey="dwe_general",h.sandboxOptsKey="dwe_sandboxes",h.settingsKey="dwe_settings",h.contextMenuKey="dwe_contextmenu",h.maskedPass="********",h.analyticsCode="UA-68649804-3",h.m=e,h.objectIsEmpty=g,h.defaultSettings={showNotifications:!0,beautifyLogsOptions:"beautify",scrollLogToBottom:!0,trimLogs:!0,trimLogErrors:"200",disableInProduction:!1},h.defaultContextMenu=[{menuName:"Logs",menuUrl:"/on/demandware.servlet/webdav/Sites/Logs/",itemId:1,default:!0,popupClass:"glyphicon glyphicon-list-alt"},{menuName:"BM Home",menuUrl:"/on/demandware.store/Sites-Site/default/ViewApplication-DisplayWelcomePage",itemId:2,default:!0,popupClass:"glyphicon glyphicon-cloud"},{menuName:"Import Export",menuUrl:"/on/demandware.store/Sites-Site/default/ViewCustomizationImpex-Start?SelectedMenuItem=studio&CurrentMenuItemId=studio",itemId:3,default:!0,popupClass:"glyphicon glyphicon-import"},{menuName:"Site Import Export",menuUrl:"/on/demandware.store/Sites-Site/default/ViewApplication-DisplayWelcomePage",itemId:4,default:!0,popupClass:"glyphicon glyphicon-cloud"},{menuName:"User List",menuUrl:"/on/demandware.store/Sites-Site/default/ViewUserList-List?SelectedMenuItem=organization&CurrentMenuItemId=organization",itemId:5,default:!0,popupClass:"glyphicon glyphicon-user"},{menuName:"Development Setup",menuUrl:"/on/demandware.store/Sites-Site/default/ViewStudioSetup-Start?SelectedMenuItem=studio&CurrentMenuItemId=studio",itemId:6,default:!0,popupClass:"glyphicon glyphicon-briefcase"},{menuName:"Impex",menuUrl:"/on/demandware.servlet/webdav/Sites/Impex/",itemId:7,default:!0,popupClass:"glyphicon glyphicon-cloud"}],h.dw_index="demandware.net",h.dw_logoninstance="logoninstance",h.hostnameExists="Hostname already exists",h.hostnameInvalid="Required",b.exports=h},{}],4:[function(a,b,c){"use strict";var d=angular.module("chromeI18N",[]);d.directive("i18nContent",["$compile",function(a){return{restrict:"A",controller:["$scope",function(a){var b=[];this.addSubstitute=function(a,c){b[a]=c},this.getSubstitutes=function(){return b}}],link:function(b,c,d,e){var f=chrome.i18n.getMessage(d.i18nContent,e.getSubstitutes());c.html(f||""),a(c.contents())(b)}}}]).directive("i18nSubstitute",function(){return{restrict:"M",require:"^i18nContent",link:function(a,b,c,d){var e=c.i18nSubstitute.match(/^\$([1-9]):(.*)$/);e&&d.addSubstitute(parseInt(e[1])-1,e[2])}}})},{}],5:[function(a,b,c){"use strict";var d=angular.module("validateForm",[]),e={validateSubmit:["$parse",function(a){return{restrict:"A",require:["validateSubmit","?form"],controller:["$scope",function(a){this.attempted=!1;var b=null;this.setAttempted=function(){this.attempted=!0},this.setFormController=function(a){b=a},this.needsAttention=function(a){return!!b&&(a?a.$invalid&&(a.$dirty||this.attempted):b&&b.$invalid&&(b.$dirty||this.attempted))}}],compile:function(b,c,d){return{pre:function(a,b,c,d){var e=d[0],f=d.length>1?d[1]:null;e.setFormController(f),a.validate=a.validate||{},a.validate[c.name]=e},post:function(b,c,d,e){var f=e[0],g=e.length>1?e[1]:null,h=a(d.validateSubmit);c.bind("submit",function(a){return f.setAttempted(),b.$$phase||b.$apply(),!!g.$valid&&void b.$apply(function(){h(b,{$event:a})})})}}}}}]};d.directive(e)},{}],6:[function(a,b,c){"use strict";a("./libs/validation.js"),a("./libs/angular-storage.js"),a("./libs/i18n.js");var d=a("./libs/constants.js"),e=angular.module("popupOptions",["validateForm","chromeStorage","chromeI18N","ui.bootstrap"]);e.controller("PopupController",["$scope","chromeStorage",function(a,b){b.getSandboxes().then(function(b){if(b)if(b.length>0){for(var c=0;c<b.length;c++)if(b[c].aliases)for(var d=0;d<b[c].aliases.length;d++)b.push(b[c].aliases[d]);a.mySandboxes=b,a.newSandbox=!1}else a.newSandbox=!0;else a.newSandbox=!0}),b.get(d.contextMenuKey).then(function(b){a.activeContextMenus=b.activeContextMenuItems}),a.openOptions=function(){var a=window.open(chrome.extension.getURL("html/options.html#sandboxes"),"_blank");a.focus()},a.addSandbox=function(){var a=window.open(chrome.extension.getURL("html/options.html#sandboxes?new"),"_blank");a.focus()},a.editSbOptions=function(a){var b=window.open(chrome.extension.getURL("html/options.html#sandboxes?edit="+a.id),"_blank");b.focus()}}])},{"./libs/angular-storage.js":1,"./libs/constants.js":3,"./libs/i18n.js":4,"./libs/validation.js":5}]},{},[6])(6)});